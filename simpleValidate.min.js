!function(e){function r(r,n){this.settings=e.extend({},t,n),this.element=r,this.init()}var t={errorInputClass:"error",errorLabelClass:"label-error",errorLabelLeftClass:"label-error_left",emptyMessage:"Заполните поле",serverErrorMessage:"Ошибка сервера, попробуйте еще раз",serverSuccessMessage:"Все круто. Данные отправились на сервер!",serverErrorDataMessage:"Вы ввели не верные данные"};r.prototype.init=function(){function r(r){e(document).on("submit",r,function(e){e.preventDefault(),a(r)||t(r)})}function t(r){for(var t=r.find("input, textarea").not('input[type="file"], input[type="hidden"]'),n=0;n<t.length;n++){var a=e(t[n]),s="#"+e(t[n]).attr("id");!function(r){e(document).on("keyup",s,function(){o(r)})}(a)}}function n(r){for(var t=r.find("input, textarea").not('input[type="file"], input[type="hidden"]'),n=0;n<t.length;n++){var a="#"+e(t[n]).attr("id");e(document).off("keyup",a)}}function a(e){var r=e.attr("data-url"),t=p(e,r);return t&&(t.done(function(e){"success"===e.status?c("success",m.serverSuccessMessage):c("error-data",m.serverErrorDataMessage)}),f(e)),t}function s(e){var r=e.find("input, textarea").not('input[type="file"], input[type="hidden"]'),t=!0;return i(r)||(t=!1),t}function o(e){var r=!u(e.val());return r?l(e):d(e),r}function i(r){for(var t=!0,n=0;n<r.length;n++)o(e(r[n]))||(t=!1);return t}function u(e){return!Boolean(e)}function l(r){var t,n=r.attr("id"),a=r.attr("name")+"-error";r.removeClass(m.errorInputClass),t=e.inArray(n,y),y.splice(t,1),e("#"+a).remove()}function d(r){var t,n=r.attr("id"),a=r.attr("name")+"-error",s=r.attr("data-error-left"),o=r.attr("data-error-left-class"),i=r.attr("data-empty-error");r.addClass(m.errorInputClass),y.push(n),0===e("#"+a).length&&e("<label>",{id:a,text:function(){return i?i:m.emptyMessage},"for":n,"class":function(){return t=s?m.errorLabelClass+" "+(o?o:m.errorLabelLeftClass):m.errorLabelClass}()}).insertAfter(r)}function f(e){e[0].reset(),n(e)}function c(r,t){var n='<div class="modal__header"><div class="b-close modal__close">Close</div> </div>',a=e("<div/>",{"class":function(){return"modal modal-"+r}(),html:function(){return n+'<div class="modal__body">'+t+"</div>"}});a.appendTo("body").bPopup({transition:"slideDown"})}function p(r,t){if(!s(r))return!1;var n,a=r.serialize();return n=e.ajax({url:t,type:"POST",dataType:"json",data:a}).fail(function(){c("server-error",m.serverErrorMessage)})}console.log("[ Start Validate Module ... ]");var v=e(this.element),m=this.settings,y=[];r(v)},e.fn.validate=function(e){return new r(this,e),this}}(jQuery);