!function(t){function e(e,a){this.settings=t.extend({},r,a),this.element=e,this.init()}var r={errorInputClass:"error",errorLabelClass:"label-error",errorLabelLeftClass:"label-error_left",emptyMessage:"Заполните поле"};e.prototype.init=function(){function e(e){if(e)for(var a=0;a<e.length;a++){var n=t(e[a]);!function(e){t(document).on("keyup",n,function(){r(e)})}(n)}}function r(t){var e=!n(t.val());e?o(t):s(t)}function a(e){if(e){f=[];for(var a=0;a<e.length;a++){var n=t(e[a]);r(n)}}}function n(t){return!Boolean(t)}function o(e){var r,a=e.attr("id"),n=e.attr("name")+"-error";e.removeClass(d.errorInputClass),r=t.inArray(a,f),f.splice(r,1),t("#"+n).remove()}function s(e){var r,a=e.attr("id"),n=e.attr("name")+"-error",o=e.attr("data-error-left"),s=e.attr("data-error-left-class"),l=e.attr("data-empty-error");e.addClass(d.errorInputClass),f.push(a),0===t("#"+n).length&&t("<label>",{id:n,text:function(){return l?l:d.emptyMessage},"for":a,"class":function(){return r=o?d.errorLabelClass+" "+(s?s:d.errorLabelLeftClass):d.errorLabelClass}()}).insertAfter(e)}function l(e){var r;"fail"===e?r=t("<div/>",{"class":"modal",id:"errorMessage",html:"Ошибка сервера, попробуйте еще раз"}):"success"===e&&(r=t("<div/>",{"class":"modal",id:"successMessage",html:"Все круто. Даннын отправились на сервер!"})),r.appendTo("body").bPopup({transition:"slideDown"})}function i(){f.length?console.log("You have arrors"):t.ajax({url:p,type:"POST",contentType:"application/json; charset-utf-8",dataType:"json",data:u.serialize()}).done(function(){console.log("success")}).fail(l("fail")).always(function(){console.log("complete")})}console.log("[ Start Validate Module ... ]");var u=this.element,c=u.find("input, textarea"),f=[],d=this.settings,p=u.attr("data-url");console.log(u),t(document).on("submit",u,function(t){t.preventDefault(),a(c),e(c),i()})},t.fn.validate=function(t){return new e(this.first(),t),this.first()}}(jQuery);